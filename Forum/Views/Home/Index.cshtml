@model PagedList.IPagedList<Forum.Models.ForumCategory>
@using PagedList.Mvc;
    <link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Forum";
}

@{
    string editName = "editName";
    string editNameCount;
    int count = 1;
}
<div class="jumbotron">
    <table class="table">
        <tr>
            <th>
                Categories

            </th>
        </tr>

        <div id="hh"></div>

        @foreach (var item in Model)
        {
            editNameCount = editName + count;
            <tr>
                <td>
                    <div>
                        @Html.ActionLink(Convert.ToString(Html.DisplayFor(modelItem => item.Name)), "Posts", new { id = item.ID })
                    </div>
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = item.ID }, new { @class = "viewDialog", data_dialog_title = "Edit category" }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.ID })
                </td>
            </tr>

            count = count + 1;
        }
    </table>

    <script>
            $(document).ready(function () {

                $.ajaxSetup({ cache: false });

                $(".viewDialog").on("click", function (e) {
                    e.preventDefault();

                    $("<div id='dialogContent'></div>")
                        .addClass("dialog")
                        .appendTo("#hh")
                        .load(this.href)
                        .dialog({
                            title: $(this).attr("data-dialog-title"),
                            close: function () { $(this).remove() },
                            modal: true,
                            buttons: {
                                "Сохранить": function () {
                                    $.ajax({
                                     url: "@Url.Action("Edit", "Home")",
                                     type: "POST",
                                     data: $('form').serialize(),
                                     datatype: "json",
                                     success: function (result) {

                                         $("#dialogContent").html(result);
                                        }
                                    });
                                }
                            }
                        });
                });
            });
    </script>
    @using (Html.BeginForm())
    {
        <br />@Html.Label("Add new category")
        <br />@Html.TextBox("Name")
        @Html.ValidationMessage("Name")
        <br /><input type="submit" value="Add" />
    }
    @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) из @Model.PageCount

    @Html.PagedListPager(Model, page => Url.Action("Index", new { page }))
</div>